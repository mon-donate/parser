## Token

- 400
  - Invalid grant_type
  - username and password are required
  - bad_request.could_not_authenticate
- 401
  - Provide client authentication
  - Invalid client credentials

## Refresh token

- 400
  - Invalid grant_type
  - Bad refresh token
  - refresh_token is required
- 401
  - Provide client authentication
  - Invalid client credentials

## Info token

- 401
  - unauthorized.bad_access_token
- 200
  - { "authenticated": false }

## Accounts

- 400
  - bad_request.missing_param.account_id
- 401
  - unauthorized.bad_access_token ??
- 403
  - forbidden.scopes_missing
  - bad_request.bad_param.limit etc

## Balance

- 401
  - unauthorized.bad_access_token ??
- 403
  - forbidden.scopes_missing

## Annotate

- 401
  - unauthorized
  - unauthorized.bad_access_token
- 404
  - not_found (account_id in url)

## Feed item

- 400
  - bad_request.missing_param.account_id
  - bad_request.missing_param.type
  - bad_request.missing_param.params[title]
  - bad_request.missing_param.params[image_url]
  - bad_request.bad_param.type
  - bad_request.bad_param.params[image_url]
- 401
  - unauthorized
  - unauthorized.bad_access_token
- 403
  - forbidden.scopes_missing (invalid account_id)

## Webhooks

- 400
  - bad_request.missing_param.account_id
- 403
  - forbidden.scopes_missing (invalid account_id)


### 400 Bad Request

    {
      "code": "bad_request.could_not_authenticate",
      "message": "Could not authenticate with credentials provided",
      "params": {
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.oauth2",
        "Client-Uid": "api"
      }
    }

    {
      "error": "invalid_request",
      "error_description": "username and password are required",
      "message": "username and password are required"
    }

    {
      "error": "invalid_grant",
      "error_description": "Invalid grant_type",
      "message": "Invalid grant_type"
    }

    {
      "error": "invalid_grant",
      "error_description": "Bad refresh token",
      "message": "Bad refresh token"
    }

    {
      "error": "invalid_request",
      "error_description": "refresh_token is required",
      "message": "refresh_token is required"
    }

Transactions

    {
      "code": "bad_request.missing_param.account_id",
      "message": "The field account_id is required",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.transactions",
        "Client-Uid": "api"
      }
    }

Create Feed Item

    {
    "code": "bad_request.bad_param.type",
      "message": "Unsupported type parameter",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.feed",
        "Client-Uid": "api"
      }
    }

    {
      "code": "bad_request.bad_param.params[image_url]",
      "message": "Invalid params[image_url] parameter",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.feed",
        "Client-Uid": "api"
      }
    }

### 401 Unauthorized

    {
      "error": "invalid_client",
      "error_description": "Provide client authentication",
      "message": "Provide client authentication"
    }

    {
      "error": "invalid_client",
      "error_description": "Invalid client credentials",
      "message": "Invalid client credentials"
    }

    {
      "code": "unauthorized.bad_access_token",
      "error": "invalid_token",
      "message": "Bad access token",
      "params": {}
    }

Accounts
    {
      "code": "unauthorized",
      "message": "User authentication required",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.accounts",
        "Client-Uid": "api"
      }
    }

Balance

    {
      "code": "unauthorized",
      "message": "Unauthorised access to endpoint",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.balance",
        "Client-Uid": "api"
      }
    }

Annotate

    {
      "code": "unauthorized",
      "message": "Unauthorised access to endpoint",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.transactions",
        "Client-Uid": "api"
      }
    }

## 403 Forbidden

    {
      "code": "forbidden.scopes_missing",
      "message": "Forbidden: required scopes missing",
      "params": {
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.balance",
        "Client-Uid": "api",
        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjaSI6Im9hdXRoY2xpZW50XzAwMDA5MmNqMzVPNkRWUVBLTkM5WEYiLCJleHAiOjE0NDk3ODk1MjYsImlhdCI6MTQ0OTYxNjcyNiwianRpIjoidG9rXzAwMDA5MnZSNVlLVFRkaUg0akZkMUYiLCJ1aSI6InVzZXJfMDAwMDkyRmVNdm5rYkYxamNXVWVjVCIsInYiOiIxIn0.dfBf5oYPqm1sNI4JpXfYtE5s-aPJY9VqVWqTzwsdAsE",
        "client_id": "oauthclient_000092cj35O6DVQPKNC9XF",
        "required_any_scopes": "admin, account_owner:acc_000092FeMvu8DVvIRs3cETx",
        "user_id": "user_000092FeMvnkbF1jcWUecT"
      }
    }

Transactions

    account_id = invalid_account
    {
      "code": "forbidden.scopes_missing",
      "message": "Forbidden: required scopes missing",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.transactions",
        "Client-Uid": "api",
        "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjaSI6Im9hdXRoY2xpZW50XzAwMDA5MmNqMzVPNkRWUVBLTkM5WEYiLCJleHAiOjE0NDk3ODk1MjYsImlhdCI6MTQ0OTYxNjcyNiwianRpIjoidG9rXzAwMDA5MnZSNVlLVFRkaUg0akZkMUYiLCJ1aSI6InVzZXJfMDAwMDkyRmVNdm5rYkYxamNXVWVjVCIsInYiOiIxIn0.dfBf5oYPqm1sNI4JpXfYtE5s-aPJY9VqVWqTzwsdAsE",
        "client_id": "oauthclient_000092cj35O6DVQPKNC9XF",
        "required_any_scopes": "account_owner:Zacc_000092FeMvu8DVvIRs3cET, admin",
        "user_id": "user_000092FeMvnkbF1jcWUecT"
      }
    }

    {
      "code": "bad_request.bad_param.limit",
        "message": "Invalid limit parameter. Should be a positive int.",
        "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.transactions",
        "Client-Uid": "api"
      }
    }

    {
      "code": "bad_request.bad_param.since",
      "message": "Invalid since param. Should be an ID or an RFC3339 encoded timestamp (`2009-11-10T23:00:00Z`)",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.transactions",
        "Client-Uid": "api"
      }
    }

### 404 Not found

Annotate transaction

    {
      "code": "not_found",
      "message": "Transaction not found",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.transactions",
        "Client-Uid": "api"
      }
    }

### 500

Delete webhook (non-existant)

    {
      "code": "internal_service.request_failed",
      "message": "An error occurred processing this request",
      "params":{
        "Client-Endpoint": "handlehttp",
        "Client-Service": "service.api.webhooks",
        "Client-Uid": "api"
      }
    }

### 200 OK

Token

    {
      "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjaSI6Im9hdXRoY2xpZW50XzAwMDA5MmNqMzVPNkRWUVBLTkM5WEYiLCJleHAiOjE0NDk3ODgzNjYsImlhdCI6MTQ0OTYxNTU2NiwianRpIjoidG9rXzAwMDA5MnZQTVZEdzRvc2VlUHZzeE4iLCJ1aSI6InVzZXJfMDAwMDkyRmVNdm5rYkYxamNXVWVjVCIsInYiOiIxIn0.EEJ62f3i94AoPNhrRZAjB-MFIFq8wVDX7ievg-TvGsY",
      "client_id": "oauthclient_000092cj35O6DVQPKNC9XF",
      "expires_in": 172799,
      "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhaSI6InRva18wMDAwOTJ2UE1WRHc0b3NlZVB2c3hOIiwiY2kiOiJvYXV0aGNsaWVudF8wMDAwOTJjajM1TzZEVlFQS05DOVhGIiwiaWF0IjoxNDQ5NjE1NTY2LCJ1aSI6InVzZXJfMDAwMDkyRmVNdm5rYkYxamNXVWVjVCIsInYiOiIxIn0.fqri3Nw07ORjUjOYHq-zti6BPzVR4iF1HdH-HkkNJQ4",
      "token_type": "Bearer",
      "user_id": "user_000092FeMvnkbF1jcWUecT"
    }

Info token

    {
      "authenticated": true,
      "client_id": "oauthclient_000092cj35O6DVQPKNC9XF",
      "user_id": "user_000092FeMvnkbF1jcWUecT"
    }

    {
      "authenticated": false
    } // no Auth header

Accounts

    {
      "accounts":[
        {
          "id": "acc_000092FeMvu8DVvIRs3cET",
          "account_number": "71164725",
          "sort_code": "000001",
          "created": "2015-11-18T19:29:42Z",
          "description": "Alexander Peter John Robinson"
        }
      ]
    }

Balance

    {
      "balance": 34,
      "ledger_balance": 34,
      "currency": "GBP",
      "spend_today": 0
    }

Create webhook

    {
      "webhook":{
        "id": "webhook_000092yJuopHgYJL7Ef9tJ",
        "account_id": "acc_000092FeMvu8DVvIRs3cET",
        "url": "http://fu2k.org/alex"
      }
    }

Upload attachment

    {
      "file_url": "https://s3-eu-west-1.amazonaws.com/mondo-production-image-uploads/user_000092FeMvnkbF1jcWUecT/zsDfhsZ0ZsmtKJ56yA19-sgp_black.gif",
      "upload_url": "https://mondo-production-image-uploads.s3.amazonaws.com/user_000092FeMvnkbF1jcWUecT/zsDfhsZ0ZsmtKJ56yA19-sgp_black.gif?AWSAccessKeyId=AKIAJWT5C3MQKQ633HMQ&Expires=1449738805&Signature=vAzjNHb9WCQ%2B4dtIOPbigvdN9tQ%3D"
    }

Register attachment

    {
      "attachment":{
        "id": "attach_000092yM8XptqmOnurQucj",
        "user_id": "user_000092FeMvnkbF1jcWUecT",
        "external_id": "tx_000092JaSHR3yBkjt4SQO9",
        "file_url": "http://fu2k.org/alex/portfolio/graphics/images/sgp/sgp_transparent.gif",
        "file_type": "gif",
        "created": "2015-12-10T09:07:25Z"
      }
    }

Deregister attachment (succeeds for any value)

    {}